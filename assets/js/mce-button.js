(function(){tinymce.PluginManager.add('my_mce_button',function(editor,url){editor.addButton('my_mce_button',{text:'插入UI样式',icon:true,image:url+'/shortcode.png',type:'menubutton',menu:[{text:'提示框',onclick:function(){editor.windowManager.open({title:'插入 Tip 短代码',body:[{type:'listbox',name:'type',label:'色彩类型','values':[{text:'提示-蓝色',value:''},{text:'成功-绿色',value:'success'},{text:'警告-橙色',value:'worning'},{text:'错误-红色',value:'error'}]},{type:'listbox',name:'display',label:'宽度','values':[{text:'100%宽-display:block',value:''},{text:'自动-display:inlineBlock',value:'inlineBlock'}]},{type:'textbox',name:'content',label:'内容',value:'若需要输入多行文本请插入后再进行修改',minWidth:300,},
],onsubmit:function(e){e.data.display?display=' display="'+e.data.display+'"':display='';e.data.type?type=' type="'+e.data.type+'"':type='';editor.insertContent('[tip'+display+type+']'+e.data.content+'[/tip]');}});}},{text:'下载按钮',menu:[{text:'直接下载',onclick:function(){editor.windowManager.open({title:'直接下载按钮',body:[{type:'textbox',name:'content',label:'下载地址',value:'http://',minWidth:300,}],onsubmit:function(e){editor.insertContent('[download]'+e.data.content+'[/download]');}});}},{text:'回复可见下载',onclick:function(){editor.windowManager.open({title:'回复可见下载',body:[{type:'textbox',name:'content',label:'下载地址',value:'http://',minWidth:300,}],onsubmit:function(e){editor.insertContent('[reply2down]'+e.data.content+'[/reply2down]');}});}}]},{text:'特殊文章格式(见既所得)',menu:[{text:'长横线',onclick:function(){editor.insertContent('<div class="flexContainer linear" style="border: medium none; height: 1px; background-color: rgb(242, 244, 246);"></div>');}},{text:'全宽度图片',onclick:function(){editor.windowManager.open({title:'插入100%宽度图片',body:[{type:'textbox',name:'img',label:'图片地址',value:'http://',minWidth:300,}],onsubmit:function(e){editor.insertContent('<div class="flexContainer"><img src="'+e.data.img+'" style="width:100%;height:100%;"></div>');}});}},{text:'图文并排',onclick:function(){editor.windowManager.open({title:'插入指定尺寸的图文并排',body:[{type:'textbox',name:'img',label:'图片地址',value:'http://',minWidth:300,},{type:'listbox',name:'position',label:'图片位置','values':[{text:'图片在文本的左侧',value:'l'},{text:'图片在文本的右侧',value:'r'}]},{type:'listbox',name:'col',label:'图片最大占用宽度','values':[{text:'占页宽比例 6:12',value:'6'},{text:'占页宽比例 5:12',value:'5'},{text:'占页宽比例 4:12',value:'4'},{text:'占页宽比例 3:12',value:'3'},{text:'占页宽比例 2:12',value:'2'},]},{type:'listbox',name:'cover',label:'图片宽度小于上述比例时','values':[{text:'保持原宽度（边沿留白）',value:'false'},{text:'放大至上述比例',value:'true'},]},{type:'textbox',name:'content',label:'文本内容（自动垂直居中）',value:'若需要输入多行文本请插入后再进行修改',minWidth:300,},],onsubmit:function(e){var img=e.data.img;var position=e.data.position;var col=e.data.col;var cover=e.data.cover;var content=e.data.content;var textCol=12-parseInt(col);if(position=='r'){var pushClass=' col-sm-push-'+textCol;var pullClass=' col-sm-pull-'+col;var imgClass='alignright';}else{var pushClass='';var pullClass='';var imgClass='alignleft';}
if(cover=='true'){imgClass='cover';}
var imgPart='<div class="block image col-sm-'+col+pushClass+'"><img class="'+imgClass+'" src="'+img+'" /></div>';var textPart='<div class="block text col-sm-'+textCol+pullClass+'"><div class="content"><p>'+content+'</p></div></div>';editor.insertContent('<div class="flexContainer">'+imgPart+textPart+'</div>');}});}}]},{text:'特殊文章格式(原短代码)',menu:[{text:'长横线',onclick:function(){editor.insertContent('[fmt][/fmt]');}},{text:'全宽度图片',onclick:function(){editor.windowManager.open({title:'插入100%宽度图片',body:[{type:'textbox',name:'img',label:'图片地址',value:'http://',minWidth:300,}],onsubmit:function(e){editor.insertContent('[fmt img="'+e.data.img+'"][/fmt]');}});}},{text:'图文并排',onclick:function(){editor.windowManager.open({title:'插入指定尺寸的图文并排',body:[{type:'textbox',name:'img',label:'图片地址',value:'http://',minWidth:300,},{type:'listbox',name:'position',label:'图片位置','values':[{text:'图片在文本的左侧',value:'l'},{text:'图片在文本的右侧',value:'r'}]},{type:'listbox',name:'col',label:'图片最大占用宽度','values':[{text:'占页宽比例 6:12',value:'6'},{text:'占页宽比例 5:12',value:'5'},{text:'占页宽比例 4:12',value:'4'},{text:'占页宽比例 3:12',value:'3'},{text:'占页宽比例 2:12',value:'2'},]},{type:'listbox',name:'cover',label:'图片宽度小于上述比例时','values':[{text:'保持原宽度（边沿留白）',value:'false'},{text:'放大至上述比例',value:'true'},]},{type:'textbox',name:'content',label:'文本内容（自动垂直居中）',value:'若需要输入多行文本请插入后再进行修改',minWidth:300,},],onsubmit:function(e){editor.insertContent('[fmt img="'+e.data.img+'" position="'+e.data.position+'" col="'+e.data.col+'" cover="'+e.data.cover+'"]'+e.data.content+'[/fmt]');}});}}]},{text:'模态框',onclick:function(){editor.windowManager.open({title:'插入模态框',body:[{type:'textbox',name:'id',label:'ID',value:'',placeholder:'英文名称，不可以有空格或符号。区别于页面上其它ID',minWidth:400,},{type:'listbox',name:'btn_type',label:'触发按钮颜色','values':[{text:'默认-白色',value:'btn-default'},{text:'提示-蓝色',value:'btn-primary'},{text:'成功-绿色',value:'btn-success'},{text:'警告-橙色',value:'btn-warning'},{text:'错误-红色',value:'btn-danger'},{text:'链接-文本',value:'btn-link'},]},{type:'textbox',name:'btn_label',label:'触发文本',value:'按钮',minWidth:400,},{type:'textbox',name:'title',label:'标题',value:'',placeholder:'',minWidth:400,},{type:'textbox',name:'close_label',label:'关闭按钮名称',value:'关闭',minWidth:400,},{type:'textbox',name:'href_label',label:'跳转按钮名称',value:'',placeholder:'不需要此功能则不填写',minWidth:400,},{type:'textbox',name:'href',label:'跳转地址',placeholder:'不需要此功能则不填写',value:'',minWidth:400,},{type:'textbox',name:'content',label:'内容',value:'若需要输入多行文本请插入后再进行修改',minWidth:400,}],onsubmit:function(e){e.data.href_label?href_label=' href_label="'+e.data.href_label+'"':href_label='';e.data.href?href=' href="'+e.data.href+'"':href='';editor.insertContent('[modal id="'+e.data.id+'" btn_type="'+e.data.btn_type+'" btn_label="'+e.data.btn_label+'" title="'+e.data.title+'" close_label="'+e.data.close_label+'"'+href_label+href+']'+e.data.content+'[/modal]');}});}},{text:'下拉菜单',menu:[{text:'下拉菜单按钮（必须先插入）',onclick:function(){editor.windowManager.open({title:'下拉菜单按钮',body:[{type:'textbox',name:'id',label:'ID',value:'',placeholder:'英文名称，不可以有空格或符号。区别于页面上其它ID',minWidth:400,},{type:'listbox',name:'btn_type',label:'触发按钮颜色','values':[{text:'默认-白色',value:'btn-default'},{text:'提示-蓝色',value:'btn-primary'},{text:'成功-绿色',value:'btn-success'},{text:'警告-橙色',value:'btn-warning'},{text:'错误-红色',value:'btn-danger'},{text:'链接-文本',value:'btn-link'},]},{type:'textbox',name:'btn_label',label:'按钮文本',value:'下拉按钮',minWidth:400,}],onsubmit:function(e){editor.insertContent('[dropdown id="'+e.data.id+'" btn_type="'+e.data.btn_type+'" btn_label="'+e.data.btn_label+'"]<p>删除此行文本，在此处插入多条“下拉菜单 - 菜单内容”</p>[/dropdown]');}});}},{text:'菜单内容（不可单独使用）',onclick:function(){editor.windowManager.open({title:'下拉菜单内容（必须配合按钮使用）',body:[{type:'textbox',name:'content',label:'菜单内容',value:'',placeholder:'输入要显示的菜单内容',minWidth:300,},{type:'textbox',name:'href',label:'菜单链接',value:'',placeholder:'不需要此功能则不填写',minWidth:300,},],onsubmit:function(e){e.data.href?href=' href="'+e.data.href+'"':href='';editor.insertContent('[li'+href+']'+e.data.content+'[/li]');}});}}]},{text:'折叠内容',onclick:function(){editor.windowManager.open({title:'插入折叠内容',body:[{type:'textbox',name:'id',label:'ID',value:'',placeholder:'英文名称，不可以有空格或符号。区别于页面上其它ID',minWidth:400,},{type:'listbox',name:'btn_type',label:'触发按钮颜色','values':[{text:'默认-白色',value:'btn-default'},{text:'提示-蓝色',value:'btn-primary'},{text:'成功-绿色',value:'btn-success'},{text:'警告-橙色',value:'btn-warning'},{text:'错误-红色',value:'btn-danger'},{text:'链接-文本',value:'btn-link'},]},{type:'textbox',name:'btn_label',label:'触发文本',value:'折叠按钮',minWidth:400,},],onsubmit:function(e){e.data.href_label?href_label=' href_label="'+e.data.href_label+'"':href_label='';e.data.href?href=' href="'+e.data.href+'"':href='';editor.insertContent('[collapse id="'+e.data.id+'" btn_type="'+e.data.btn_type+'" btn_label="'+e.data.btn_label+'"]<p>内容填写在这里，可写入多行文本</p>[/collapse]');}});}},{text:'回复可见内容',onclick:function(){editor.insertContent('[need_reply]<p>请输入回复可见内容...</p>[/need_reply]');}}]});});})();